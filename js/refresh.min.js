jQuery(document).ready(function(e){e.fn.isInViewport=function(t){var n={percentInView:1},o=e.extend({},n,t),r=e(window),i=e(this),a=i.offset().top,s=i.outerHeight(),c=a+s,u=r.scrollTop(),l=r.height(),d=u+l;if(o.percentInView<1&&o.percentInView>0){var f=u>a?u:a,p=c>d?d:c,h=p-f;return h/s>=o.percentInView}return d>c&&a>u};var t=function(){var e,t,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychang"};for(e in n)if(e in document){t=n[e];break}return function(n){return n&&document.addEventListener(t,n),!document[e]}}(),n=e(window);n.on("load",function(){function n(){for(var t in refresh_slots)if(refresh_slots.hasOwnProperty(t)){var n=refresh_slots[t].getSlotElementId(),o=e("#"+n).isInViewport({percentInView:.5});o&&googletag.cmd.push(function(){googletag.pubads().refresh([refresh_slots[t]])})}}function o(){a===!1&&(i=setInterval(n,refresh_time),a=!0)}function r(){clearInterval(i),a=!1}var i=setInterval(n,refresh_time),a=!0,s=!1;t(function(){var e=t();e?e&&o():r()});var c=void 0===document.documentMode,u=window.chrome;c&&!u&&s===!1?e(window).on("focus",o).on("blur",r):window.addEventListener&&s===!1?(window.addEventListener("focus",o,!1),window.addEventListener("blur",r,!1),s=!0):s===!1&&(window.attachEvent("focus",o),window.attachEvent("blur",r),s=!0)})});
