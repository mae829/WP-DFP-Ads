jQuery(document).ready(function(e){e.fn.isInViewport=function(t){var n={percentInView:1},r=e.extend({},n,t),o=e(window),a=e(this),i=a.offset().top,s=a.outerHeight(),c=i+s,l=o.scrollTop(),u=o.height(),f=l+u;if(r.percentInView<1&&r.percentInView>0){var d=l>i?l:i,p=c>f?f:c,m=p-d;return m/s>=r.percentInView}return f>c&&i>l};var t=function(){var e,t,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychang"};for(e in n)if(e in document){t=n[e];break}return function(n){return n&&document.addEventListener(t,n),!document[e]}}(),n=e(window);n.on("load",function(){function n(){for(var t in refresh_slots)if(refresh_slots.hasOwnProperty(t)){var n=refresh_slots[t].getSlotElementId();isInViewport=e("#"+n).isInViewport({percentInView:.5}),isInViewport&&googletag.cmd.push(function(){googletag.pubads().refresh([refresh_slots[t]])})}}function r(){i===!1&&(a=setInterval(n,refresh_time),i=!0)}function o(){clearInterval(a),i=!1}var a=setInterval(n,refresh_time),i=!0,s=!1;t(function(){var e=t();e?e&&r():o()});var c=void 0===document.documentMode,l=window.chrome;c&&!l&&s===!1?e(window).on("focus",r).on("blur",o):window.addEventListener&&s===!1?(window.addEventListener("focus",r,!1),window.addEventListener("blur",o,!1),s=!0):s===!1&&(window.attachEvent("focus",r),window.attachEvent("blur",o),s=!0)})});
